.\" Text automatically generated by txt2man
.TH landscape-config 1 "11 March 2023" "" ""
.SH NAME
\fBlandscape-config \fP- configure the Landscape management client
\fB
.SH SYNOPSIS
.nf
.fam C
\fBlandscape-config\fP [\fIoptions\fP]

.fam T
.fi
.fam T
.fi
.SH DESCRIPTION

Before using the landscape-client it must be configured with account and
computer information that is transmitted to the Landscape server when the
client connects. The registration can be performed with or without user
interaction.
.PP
Running the \fBlandscape-config\fP program without arguments will start the
program, prompting you for the necessary information to run the client.
Optionally you can provide command-line arguments (detailed below) to
specify default responses.
.PP
You will be told if the registration was successful or if an error occurred.
When registration is successful Landscape is configured and running on your
system. Errors can occur if you provide incorrect registration details or if
there are network issues. In the latter case, the client will keep trying
to complete the registration in the background.
.SH OPTIONS
.TP
.B
\fB--version\fP
Show program's version number and exit.
.TP
.B
\fB-h\fP, \fB--help\fP
Show this help message and exit.
.TP
.B
\fB-c\fP FILE, \fB--config\fP=FILE
Use config from this file (any command line \fIoptions\fP
override settings from the file) (default: '/etc/landscape/client.conf').
.TP
.B
\fB-d\fP PATH, \fB--data-path\fP=PATH
The directory to store data files in (default: '/var/lib/landscape/client').
.TP
.B
\fB-q\fP, \fB--quiet\fP
Do not log to the standard output.
.TP
.B
\fB-l\fP FILE, \fB--log-dir\fP=FILE
The directory to write log files to (default: '/var/log/landscape').
.TP
.B
\fB--log-level\fP=LOG_LEVEL
One of 'debug', 'info', 'warning', 'error' or 'critical' (default: 'info').
.TP
.B
\fB--ignore-sigint\fP
Ignore interrupt signals.
.TP
.B
\fB--ignore-sigusr1\fP
Ignore SIGUSR1 signal to rotate logs.
.TP
.B
\fB-a\fP NAME, \fB--account-name\fP=NAME
The account this computer belongs to.
.TP
.B
\fB-p\fP KEY, \fB--registration-key\fP=KEY
The account-wide key
used for registering clients.
.TP
.B
\fB-t\fP TITLE, \fB--computer-title\fP=TITLE
The title of this computer.
.TP
.B
\fB-u\fP URL, \fB--url\fP=URL
The server URL to connect to (default: 'https://landscape.canonical.com/message-system').
.TP
.B
\fB-k\fP SSL_PUBLIC_KEY, \fB--ssl-public-key\fP=SSL_PUBLIC_KEY
The SSL CA certificate to
verify the server with. Only used if the server URL
to which we connect is https.
.TP
.B
\fB--exchange-interval\fP=INTERVAL
The number of seconds between server
exchanges (default: 900).
.TP
.B
\fB--urgent-exchange-interval\fP=INTERVAL
The number of seconds between urgent
server exchanges (default: 60).
.TP
.B
\fB--ping-interval\fP=INTERVAL
The number of seconds between pings (default: 30).
.TP
.B
\fB--ping-url\fP=PING_URL
The URL to perform lightweight exchange initiation
with (default: 'http://landscape.canonical.com/ping').
.TP
.B
\fB--package-monitor-interval\fP=PACKAGE_MONITOR_INTERVAL
The interval between
package monitor runs (default: 1800).
.TP
.B
\fB--apt-update-interval\fP=APT_UPDATE_INTERVAL
The interval between apt update
runs (default: 21600).
.TP
.B
\fB--flush-interval\fP
The number of seconds between flushes to disk for
persisent data.
.TP
.B
\fB--stagger-launch\fP=STAGGER_RATIO
Ratio, between 0 and 1, by which to stagger various
tasks of landscape.
.TP
.B
\fB--manage-sources-list-d\fP
Repository profiles manage the files in
\(cqetc/apt/sources.list.d'.
.TP
.B
\fB--http-proxy\fP=URL
The URL of the HTTP proxy, if one is needed.
.TP
.B
\fB--https-proxy\fP=URL
The URL of the HTTPS proxy, if one is needed.
.TP
.B
\fB--access-group\fP
Suggested access group for this computer.
.TP
.B
\fB--tags\fP=TAGS
Comma separated list of tag names to be sent to the
server.
.TP
.B
\fB--import\fP=FILENAME_OR_URL
Filename or URL to import configuration from.
Imported \fIoptions\fP behave as if they were passed in
the command line, with precedence being given to
real command line \fIoptions\fP.
.TP
.B
\fB--script-users\fP=USERS
A comma-separated list of users to allow scripts to
run. To allow scripts to be run by any user,
enter: ALL.
.TP
.B
\fB--include-manager-plugins\fP=PLUGINS
A comma-separated list of manager
plugins to load explicitly.
.TP
.B
\fB-n\fP, \fB--no-start\fP
Don't start the client automatically.
.TP
.B
\fB--ok-no-register\fP
Return exit code 0 instead of 2 if the client can't be
registered.
.TP
.B
\fB--silent\fP
Run without manual interaction.
.TP
.B
\fB--disable\fP
Stop running clients and disable start at boot.
.TP
.B
\fB--init\fP
Set up the client directories structure and exit.
.TP
.B
\fB--is-registered\fP
Exit with code 0 (success) if client
is registered else returns 5. Display
registration info.
.SH CLOUD

Landscape has some cloud features that become available when the EC2 or
UEC machine instance was started using Landscape and the AMI is one of
the official ones provided in the Web user interface. We call these
instances "Landscape enabled", because they contain a pre-configured
landscape-client installed in them which will register the running instance
automatically with Landscape as soon as it starts up.
.PP
You can deploy your own AMI, but if you wish the instance to become
"Landscape managed" you need to take a few steps:
.IP \(bu 3
make sure the cloud is created in Landscape
.IP \(bu 3
add "CLOUD=1" to /etc/default/landscape-client
.IP \(bu 3
make sure the client is configured to start at boot (i.e., the
/etc/default/landscape-client has the line "RUN=1")
.PP
There is no need to further configure the /etc/landscape/client.conf file
with details such as account or key, because when in cloud mode
this is all discovered by the client itself.
.PP
You can avoid this all if you just re-bundle the AMIs we provide.
landscape-client is already configured and prepared for the cloud in
them.
.SH EXAMPLES

Register a machine for the first time, or reconfigure an already
registered machine, interactively. Command line parameters suppress
interaction for provided values.
.PP
.nf
.fam C
  landscape-config

.fam T
.fi
Register a machine for the first time, or reconfigure an already
registered machine, without requiring user interaction. The client
will be configured to start on boot automatically:
.PP
.nf
.fam C
  landscape-config --silent -a account-name -p secret -t `hostname`

.fam T
.fi
Register a machine with the script execution plugin enabled, without
requiring user interaction:
.PP
.nf
.fam C
  landscape-config --silent -a account-name -p secret -t `hostname` --script-users nobody,landscape,root

.fam T
.fi
Register a machine with some tags:
.PP
.nf
.fam C
  landscape-config --silent -a account-name -p secret -t `hostname` --tags=server,www

.fam T
.fi
To disable a client, stopping current instances and disabling start at
bootup:
.PP
.nf
.fam C
  landscape-config --disable


.fam T
.fi
.SH SEE ALSO

landscape-client (1)
.SH AUTHOR
Landscape Development Team <landscape-team@canonical.com>
